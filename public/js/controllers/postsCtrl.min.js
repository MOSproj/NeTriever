(function(){angular.module("myApp").controller("postsCtrl",["$scope","$routeParams","$location","$log","postsSrv","cookiesSrv",a]);function a(e,h,i,g,c,f){var d=this;d.postsPerPage=50;var b=i.search();d.categoryId=h.categoryId;c.getPosts(d.categoryId,b).then(function(j){g.debug(j.data);d.posts=j.data;d.cookieObj=f.getLovedPosts();angular.forEach(d.posts,(function(k){k.love=d.cookieObj.hasOwnProperty(k.id)}))});d.love=function(j){j.love=!j.love;if(j.love){f.addLovedPost(j.id)}else{f.removeLovedPost(j.id)}};d.pagination={backButtonDisabled:function(){return !b.hasOwnProperty("page")||b.page==="1"},forwardButtonDisabled:function(){return d.posts!==undefined&&d.posts.length!==d.postsPerPage},back:function(){if(!d.pagination.backButtonDisabled()){b.page=b.page-1;i.path(i.path()).search(b)}},forward:function(){if(!d.pagination.forwardButtonDisabled()){if(!b.hasOwnProperty("page")){b.page=1}b.page=b.page+1;i.path(i.path()).search(b)}}}}})();