(function(){angular.module("myApp").controller("postsCtrl",["$scope","$routeParams","$location","$log","postsSrv","cookiesSrv",a]);function a(e,h,i,g,c,f){var d=this;d.postsPerPage=50;var b=i.search();d.categoryId=h.categoryId;d.lovePostsIds=f.getLovedPosts();c.getPostsByCategory(d.categoryId,b).then(function(j){d.posts=j.data;angular.forEach(d.posts,(function(k){k.love=d.lovePostsIds.indexOf(k.id)!==-1}))});d.love=function(j){j.love=!j.love;if(j.love){f.addLovedPost(j.id)}else{f.removeLovedPost(j.id)}};d.pagination={backButtonDisabled:function(){return !b.hasOwnProperty("page")||b.page==="1"},forwardButtonDisabled:function(){return d.posts!==undefined&&d.posts.length!==d.postsPerPage},back:function(){if(!d.pagination.backButtonDisabled()){b.page=parseInt(b.page)-1;i.path(i.path()).search(b)}},forward:function(){if(!d.pagination.forwardButtonDisabled()){if(!b.hasOwnProperty("page")){b.page=1}b.page=parseInt(b.page)+1;i.path(i.path()).search(b)}}}}})();